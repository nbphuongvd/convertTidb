<configuration>
	<!-- Định dạng log -->
	<property name="LOG_PATTERN"
		value="%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n" />

	<!-- Thư mục lưu log -->
	<property name="LOG_PATH" value="./logs" />

	<!-- Console Appender (hiển thị log trên console) -->
	<appender name="CONSOLE"
		class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>${LOG_PATTERN}</pattern>
		</encoder>
	</appender>

	<!-- ===== Appender cho INFO ===== -->
	<appender name="INFO_FILE"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${LOG_PATH}/info.log</file>
		<rollingPolicy
			class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>${LOG_PATH}/info-%d{yyyy-MM-dd}.log
			</fileNamePattern>
			<maxHistory>30</maxHistory>
		</rollingPolicy>
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>INFO</level>
			<onMatch>ACCEPT</onMatch>
			<onMismatch>DENY</onMismatch>
		</filter>
		<encoder>
			<pattern>${LOG_PATTERN}</pattern>
		</encoder>
	</appender>

	<!-- ===== Appender cho ERROR ===== -->
	<appender name="ERROR_FILE"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${LOG_PATH}/error.log</file>
		<rollingPolicy
			class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>${LOG_PATH}/error-%d{yyyy-MM-dd}.log
			</fileNamePattern>
			<maxHistory>30</maxHistory>
		</rollingPolicy>
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>ERROR</level>
			<onMatch>ACCEPT</onMatch>
			<onMismatch>DENY</onMismatch>
		</filter>
		<encoder>
			<pattern>${LOG_PATTERN}</pattern>
		</encoder>
	</appender>

	<!-- ===== Appender cho FATAL ===== -->
<!-- 	<appender name="FATAL_FILE" -->
<!-- 		class="ch.qos.logback.core.rolling.RollingFileAppender"> -->
<!-- 		<file>${LOG_PATH}/fatal.log</file> -->
<!-- 		<rollingPolicy -->
<!-- 			class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"> -->
<!-- 			<fileNamePattern>${LOG_PATH}/fatal-%d{yyyy-MM-dd}.log -->
<!-- 			</fileNamePattern> -->
<!-- 			<maxHistory>30</maxHistory> -->
<!-- 		</rollingPolicy> -->
<!-- 		<filter class="ch.qos.logback.classic.filter.LevelFilter"> -->
<!-- 			<level>ERROR</level> Spring Boot không có mức "FATAL", dùng ERROR thay thế -->
<!-- 			<onMatch>ACCEPT</onMatch> -->
<!-- 			<onMismatch>DENY</onMismatch> -->
<!-- 		</filter> -->
<!-- 		<encoder> -->
<!-- 			<pattern>${LOG_PATTERN}</pattern> -->
<!-- 		</encoder> -->
<!-- 	</appender> -->

	<!-- ===== Cấu hình Logger cho từng tầng ===== -->
	<logger name="com.example.controller" level="INFO"
		additivity="false">
		<appender-ref ref="INFO_FILE" />
		<appender-ref ref="ERROR_FILE" />
	</logger>

	<logger name="com.example.service" level="INFO"
		additivity="false">
		<appender-ref ref="INFO_FILE" />
		<appender-ref ref="ERROR_FILE" />
	</logger>

<!-- 	<logger name="com.example.repository" level="INFO" -->
<!-- 		additivity="false"> -->
<!-- 		<appender-ref ref="INFO_FILE" /> -->
<!-- 		<appender-ref ref="ERROR_FILE" /> -->
<!-- 		<appender-ref ref="FATAL_FILE" /> -->
<!-- 	</logger> -->

	<!-- Log mặc định -->
	<root level="INFO">
		<appender-ref ref="CONSOLE"/>
		<appender-ref ref="INFO_FILE" />
		<appender-ref ref="ERROR_FILE" />
	</root>
</configuration>
